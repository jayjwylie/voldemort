<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_27) on Thu Aug 08 14:55:24 PDT 2013 -->
<TITLE>
AdminClient.RebalancingOperations (Voldemort)
</TITLE>

<META NAME="date" CONTENT="2013-08-08">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="AdminClient.RebalancingOperations (Voldemort)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/AdminClient.RebalancingOperations.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../voldemort/client/protocol/admin/AdminClient.ReadOnlySpecificOperations.html" title="class in voldemort.client.protocol.admin"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../voldemort/client/protocol/admin/AdminClient.ReplicationOperations.html" title="class in voldemort.client.protocol.admin"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?voldemort/client/protocol/admin/AdminClient.RebalancingOperations.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="AdminClient.RebalancingOperations.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
voldemort.client.protocol.admin</FONT>
<BR>
Class AdminClient.RebalancingOperations</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../../resources/inherit.gif" ALT="extended by "><B>voldemort.client.protocol.admin.AdminClient.RebalancingOperations</B>
</PRE>
<DL>
<DT><B>Enclosing class:</B><DD><A HREF="../../../../voldemort/client/protocol/admin/AdminClient.html" title="class in voldemort.client.protocol.admin">AdminClient</A></DD>
</DL>
<HR>
<DL>
<DT><PRE>public class <B>AdminClient.RebalancingOperations</B><DT>extends java.lang.Object</DL>
</PRE>

<P>
Encapsulates all operations concerning cluster expansion
<P>

<P>
<HR>

<P>

<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../voldemort/client/protocol/admin/AdminClient.RebalancingOperations.html#AdminClient.RebalancingOperations()">AdminClient.RebalancingOperations</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../voldemort/client/protocol/admin/AdminClient.RebalancingOperations.html#checkEachServerInNormalState(voldemort.cluster.Cluster)">checkEachServerInNormalState</A></B>(<A HREF="../../../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;cluster)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Check the execution state of the server by checking the state of
 <A HREF="../../../../voldemort/store/metadata/MetadataStore.VoldemortState.html" title="enum in voldemort.store.metadata"><CODE>MetadataStore.VoldemortState</CODE></A> <br>
 
 This function checks if the nodes are all in normal state (
 <A HREF="../../../../voldemort/store/metadata/MetadataStore.VoldemortState.html#NORMAL_SERVER"><CODE>MetadataStore.VoldemortState.NORMAL_SERVER</CODE></A>).</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../voldemort/client/protocol/admin/AdminClient.RebalancingOperations.html#deleteStoreRebalanceState(int, int, java.lang.String)">deleteStoreRebalanceState</A></B>(int&nbsp;donorNodeId,
                          int&nbsp;stealerNodeId,
                          java.lang.String&nbsp;storeName)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Delete the rebalancing metadata related to the store on the stealer
 node</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.util.List&lt;<A HREF="../../../../voldemort/store/StoreDefinition.html" title="class in voldemort.store">StoreDefinition</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../voldemort/client/protocol/admin/AdminClient.RebalancingOperations.html#getCurrentStoreDefinitions(voldemort.cluster.Cluster)">getCurrentStoreDefinitions</A></B>(<A HREF="../../../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;cluster)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Given the cluster metadata, retrieves the list of store definitions.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../voldemort/versioning/Versioned.html" title="class in voldemort.versioning">Versioned</A>&lt;<A HREF="../../../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../voldemort/client/protocol/admin/AdminClient.RebalancingOperations.html#getLatestCluster(java.util.List)">getLatestCluster</A></B>(java.util.List&lt;java.lang.Integer&gt;&nbsp;requiredNodes)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get the latest cluster from all available nodes in the cluster<br>
 
 Throws exception if:<br>
 A) Any node in the required nodes list fails to respond.<br>
 B) Cluster is in inconsistent state with concurrent versions for
 cluster metadata on any two nodes.<br></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../voldemort/versioning/Versioned.html" title="class in voldemort.versioning">Versioned</A>&lt;<A HREF="../../../../voldemort/store/metadata/MetadataStore.VoldemortState.html" title="enum in voldemort.store.metadata">MetadataStore.VoldemortState</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../voldemort/client/protocol/admin/AdminClient.RebalancingOperations.html#getRemoteServerState(int)">getRemoteServerState</A></B>(int&nbsp;nodeId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Retrieve the server
 <A HREF="../../../../voldemort/store/metadata/MetadataStore.VoldemortState.html" title="enum in voldemort.store.metadata"><CODE>MetadataStore.VoldemortState</CODE></A> from a
 remote node.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../voldemort/client/protocol/admin/AdminClient.RebalancingOperations.html#rebalanceNode(voldemort.client.rebalance.RebalanceTaskInfo)">rebalanceNode</A></B>(<A HREF="../../../../voldemort/client/rebalance/RebalanceTaskInfo.html" title="class in voldemort.client.rebalance">RebalanceTaskInfo</A>&nbsp;stealInfo)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Rebalance a stealer-donor node pair for a set of stores.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../voldemort/client/protocol/admin/AdminClient.RebalancingOperations.html#rebalanceStateChange(voldemort.cluster.Cluster, voldemort.cluster.Cluster, java.util.List, java.util.List, java.util.List, boolean, boolean, boolean, boolean, boolean)">rebalanceStateChange</A></B>(<A HREF="../../../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;existingCluster,
                     <A HREF="../../../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;transitionCluster,
                     java.util.List&lt;<A HREF="../../../../voldemort/store/StoreDefinition.html" title="class in voldemort.store">StoreDefinition</A>&gt;&nbsp;existingStoreDefs,
                     java.util.List&lt;<A HREF="../../../../voldemort/store/StoreDefinition.html" title="class in voldemort.store">StoreDefinition</A>&gt;&nbsp;targetStoreDefs,
                     java.util.List&lt;<A HREF="../../../../voldemort/client/rebalance/RebalanceTaskInfo.html" title="class in voldemort.client.rebalance">RebalanceTaskInfo</A>&gt;&nbsp;rebalanceTaskPlanList,
                     boolean&nbsp;swapRO,
                     boolean&nbsp;changeClusterMetadata,
                     boolean&nbsp;changeRebalanceState,
                     boolean&nbsp;rollback,
                     boolean&nbsp;failEarly)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Used in rebalancing to indicate change in states.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../voldemort/client/protocol/admin/AdminClient.RebalancingOperations.html#validateReadOnlyStores(voldemort.cluster.Cluster, java.util.List)">validateReadOnlyStores</A></B>(<A HREF="../../../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;cluster,
                       java.util.List&lt;<A HREF="../../../../voldemort/store/StoreDefinition.html" title="class in voldemort.store">StoreDefinition</A>&gt;&nbsp;storeDefs)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Given a list of store definitions, cluster and admin client returns a
 boolean indicating if all RO stores are in the correct format.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="AdminClient.RebalancingOperations()"><!-- --></A><H3>
AdminClient.RebalancingOperations</H3>
<PRE>
public <B>AdminClient.RebalancingOperations</B>()</PRE>
<DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="rebalanceNode(voldemort.client.rebalance.RebalanceTaskInfo)"><!-- --></A><H3>
rebalanceNode</H3>
<PRE>
public int <B>rebalanceNode</B>(<A HREF="../../../../voldemort/client/rebalance/RebalanceTaskInfo.html" title="class in voldemort.client.rebalance">RebalanceTaskInfo</A>&nbsp;stealInfo)</PRE>
<DL>
<DD>Rebalance a stealer-donor node pair for a set of stores. This is run
 on the stealer node.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>stealInfo</CODE> - Partition steal information
<DT><B>Returns:</B><DD>The request id of the async operation</DL>
</DD>
</DL>
<HR>

<A NAME="deleteStoreRebalanceState(int, int, java.lang.String)"><!-- --></A><H3>
deleteStoreRebalanceState</H3>
<PRE>
public void <B>deleteStoreRebalanceState</B>(int&nbsp;donorNodeId,
                                      int&nbsp;stealerNodeId,
                                      java.lang.String&nbsp;storeName)</PRE>
<DL>
<DD>Delete the rebalancing metadata related to the store on the stealer
 node
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>donorNodeId</CODE> - The donor node id<DD><CODE>stealerNodeId</CODE> - The stealer node id<DD><CODE>storeName</CODE> - The name of the store</DL>
</DD>
</DL>
<HR>

<A NAME="getRemoteServerState(int)"><!-- --></A><H3>
getRemoteServerState</H3>
<PRE>
public <A HREF="../../../../voldemort/versioning/Versioned.html" title="class in voldemort.versioning">Versioned</A>&lt;<A HREF="../../../../voldemort/store/metadata/MetadataStore.VoldemortState.html" title="enum in voldemort.store.metadata">MetadataStore.VoldemortState</A>&gt; <B>getRemoteServerState</B>(int&nbsp;nodeId)</PRE>
<DL>
<DD>Retrieve the server
 <A HREF="../../../../voldemort/store/metadata/MetadataStore.VoldemortState.html" title="enum in voldemort.store.metadata"><CODE>MetadataStore.VoldemortState</CODE></A> from a
 remote node.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>nodeId</CODE> - The node from which we want to retrieve the state
<DT><B>Returns:</B><DD>The server state</DL>
</DD>
</DL>
<HR>

<A NAME="rebalanceStateChange(voldemort.cluster.Cluster, voldemort.cluster.Cluster, java.util.List, java.util.List, java.util.List, boolean, boolean, boolean, boolean, boolean)"><!-- --></A><H3>
rebalanceStateChange</H3>
<PRE>
public void <B>rebalanceStateChange</B>(<A HREF="../../../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;existingCluster,
                                 <A HREF="../../../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;transitionCluster,
                                 java.util.List&lt;<A HREF="../../../../voldemort/store/StoreDefinition.html" title="class in voldemort.store">StoreDefinition</A>&gt;&nbsp;existingStoreDefs,
                                 java.util.List&lt;<A HREF="../../../../voldemort/store/StoreDefinition.html" title="class in voldemort.store">StoreDefinition</A>&gt;&nbsp;targetStoreDefs,
                                 java.util.List&lt;<A HREF="../../../../voldemort/client/rebalance/RebalanceTaskInfo.html" title="class in voldemort.client.rebalance">RebalanceTaskInfo</A>&gt;&nbsp;rebalanceTaskPlanList,
                                 boolean&nbsp;swapRO,
                                 boolean&nbsp;changeClusterMetadata,
                                 boolean&nbsp;changeRebalanceState,
                                 boolean&nbsp;rollback,
                                 boolean&nbsp;failEarly)</PRE>
<DL>
<DD>Used in rebalancing to indicate change in states. Groups the
 partition plans on the basis of stealer nodes and sends them over.
 
 The various combinations and their order of execution is given below
 where:
 <ul>
 <li>'cluster' means cluster state is updated
 <li>'rebalance' means rebalance flag is set.
 <li>'swap' means stores are swapped.
 </ul>
 
 <pre>
 | swapRO | changeClusterMetadata | changeRebalanceState | Order                        |
 |   f    |         t             |          t           | cluster -> rebalance         | 
 |   f    |         f             |          t           | rebalance                    |
 |   t    |         t             |          f           | cluster -> swap              |
 |   t    |         t             |          t           | cluster -> swap -> rebalance |
 </pre>
 
 
 Similarly for rollback, order means the following:
 <ul>
 <li>'remove from rebalance' means set rebalance flag false
 <li>'cluster' means cluster is rolled back
 <li>'swap' means stores are swapped
 </ul>
 
 <pre>
 | swapRO | changeClusterMetadata | changeRebalanceState | Order                                    |
 |   f    |         t             |          t           | remove from rebalance -> cluster         | 
 |   f    |         f             |          t           | remove from rebalance                    |
 |   t    |         t             |          f           | cluster -> swap                          |
 |   t    |         t             |          t           | remove from rebalance -> cluster -> swap |
 </pre>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>existingCluster</CODE> - Current cluster<DD><CODE>transitionCluster</CODE> - Transition cluster<DD><CODE>existingStoreDefs</CODE> - current store defs<DD><CODE>targetStoreDefs</CODE> - transition store defs<DD><CODE>rebalanceTaskPlanList</CODE> - The list of rebalance partition
        info plans<DD><CODE>swapRO</CODE> - Boolean indicating if we need to swap RO stores<DD><CODE>changeClusterMetadata</CODE> - Boolean indicating if we need to change
        cluster metadata<DD><CODE>changeRebalanceState</CODE> - Boolean indicating if we need to change
        rebalancing state<DD><CODE>rollback</CODE> - Do we want to do a rollback step in case of failures?<DD><CODE>failEarly</CODE> - Do we want to fail early while doing state change?</DL>
</DD>
</DL>
<HR>

<A NAME="getLatestCluster(java.util.List)"><!-- --></A><H3>
getLatestCluster</H3>
<PRE>
public <A HREF="../../../../voldemort/versioning/Versioned.html" title="class in voldemort.versioning">Versioned</A>&lt;<A HREF="../../../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&gt; <B>getLatestCluster</B>(java.util.List&lt;java.lang.Integer&gt;&nbsp;requiredNodes)</PRE>
<DL>
<DD>Get the latest cluster from all available nodes in the cluster<br>
 
 Throws exception if:<br>
 A) Any node in the required nodes list fails to respond.<br>
 B) Cluster is in inconsistent state with concurrent versions for
 cluster metadata on any two nodes.<br>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>requiredNodes</CODE> - List of nodes from which we definitely need an
        answer
<DT><B>Returns:</B><DD>Returns the latest cluster metadata</DL>
</DD>
</DL>
<HR>

<A NAME="checkEachServerInNormalState(voldemort.cluster.Cluster)"><!-- --></A><H3>
checkEachServerInNormalState</H3>
<PRE>
public void <B>checkEachServerInNormalState</B>(<A HREF="../../../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;cluster)</PRE>
<DL>
<DD>Check the execution state of the server by checking the state of
 <A HREF="../../../../voldemort/store/metadata/MetadataStore.VoldemortState.html" title="enum in voldemort.store.metadata"><CODE>MetadataStore.VoldemortState</CODE></A> <br>
 
 This function checks if the nodes are all in normal state (
 <A HREF="../../../../voldemort/store/metadata/MetadataStore.VoldemortState.html#NORMAL_SERVER"><CODE>MetadataStore.VoldemortState.NORMAL_SERVER</CODE></A>).
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>cluster</CODE> - Cluster metadata whose nodes we are checking
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../voldemort/server/rebalance/VoldemortRebalancingException.html" title="class in voldemort.server.rebalance">VoldemortRebalancingException</A></CODE> - if any node is not in normal
         state</DL>
</DD>
</DL>
<HR>

<A NAME="getCurrentStoreDefinitions(voldemort.cluster.Cluster)"><!-- --></A><H3>
getCurrentStoreDefinitions</H3>
<PRE>
public java.util.List&lt;<A HREF="../../../../voldemort/store/StoreDefinition.html" title="class in voldemort.store">StoreDefinition</A>&gt; <B>getCurrentStoreDefinitions</B>(<A HREF="../../../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;cluster)</PRE>
<DL>
<DD>Given the cluster metadata, retrieves the list of store definitions.
 
 <br>
 
 It also checks if the store definitions are consistent across the
 cluster
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>cluster</CODE> - The cluster metadata
<DT><B>Returns:</B><DD>List of store definitions</DL>
</DD>
</DL>
<HR>

<A NAME="validateReadOnlyStores(voldemort.cluster.Cluster, java.util.List)"><!-- --></A><H3>
validateReadOnlyStores</H3>
<PRE>
public void <B>validateReadOnlyStores</B>(<A HREF="../../../../voldemort/cluster/Cluster.html" title="class in voldemort.cluster">Cluster</A>&nbsp;cluster,
                                   java.util.List&lt;<A HREF="../../../../voldemort/store/StoreDefinition.html" title="class in voldemort.store">StoreDefinition</A>&gt;&nbsp;storeDefs)</PRE>
<DL>
<DD>Given a list of store definitions, cluster and admin client returns a
 boolean indicating if all RO stores are in the correct format.
 
 <br>
 
 This function also takes into consideration nodes which are being
 bootstrapped for the first time, in which case we can safely ignore
 checking them ( as they will have default to ro0 )
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>cluster</CODE> - Cluster metadata<DD><CODE>storeDefs</CODE> - Complete list of store definitions</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/AdminClient.RebalancingOperations.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../voldemort/client/protocol/admin/AdminClient.ReadOnlySpecificOperations.html" title="class in voldemort.client.protocol.admin"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../voldemort/client/protocol/admin/AdminClient.ReplicationOperations.html" title="class in voldemort.client.protocol.admin"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?voldemort/client/protocol/admin/AdminClient.RebalancingOperations.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="AdminClient.RebalancingOperations.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
Jay Kreps, Roshan Sumbaly, Alex Feinberg, Bhupesh Bansal, Lei Gao, Chinmay Soman, Vinoth Chandar, Zhongjie Wu
</BODY>
</HTML>
